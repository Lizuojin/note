---
sidebarDepth: 1
---

# 新特性

## ● 组合式 API
- 更好的逻辑复用和代码组织
- 更好的类型推到
### 什么是组合式 API
选项式 API ：按选项类型分组的代码存在的问题：
- 碎片化使得理解和维护复杂组件变得困难
- 选项的分离掩盖了潜在的逻辑问题
- 处理单个逻辑关注点时，需要不断地跳转相关代码的选项块

**`组合式 API`：能够将于同一个逻辑关注点相关的代码配置一起**

### 组合式 API 基础
开始使用组合式 API，在 Vue 组件中的位置称为 `setup`

#### `setup` 组件选项
- 新的 `setup` 组件选项在创建组件之前执行，一旦 `props` 被解析，并充当合成 `API` 的入口点
- 由于在执行 `setup` 时尚未创建组件实例，因此在 `setup` 选项中没有 this。这意味着，除了 `props` 之外，你将无法访问组件中声明的任何属性 —— **本地状态、计算属性或方法**

#### `ref` 的响应式变量
- `ref` 函数使任何响应式变量在任何地方起作用

在使用 `options API` 时，响应式数据只能定义在 `data` 选择中，使用 `compositions API` 更好地抽离代码，进而复用逻辑
```js
// data.js
import { ref } from 'vue'

let num = ref(123);

export default num
```

```vue
<!-- app.vue -->
<template>
    <button @click="add">add</button>
    <p>{{num}}</p>
</template>

<script>
import num from './js/counter';
export default {
    name: "App",
    setup() {
        function add() {
            num.value++
        };
        return {
            num,
            add
        }

    },
};
</script>
```
# 闭包

:::tip JavaScript语言精髓与编程实践 中的定义:
闭包是用于记录函数实例在执行期“可访问标识符”的信息

JavaScript 引擎通过闭包来为每个函数维护其执行期的信息，因此函数被再次执行或者通过某种方式进入函数以内时，就可以通过访问闭包得到这些信息
:::

:::tip 你不知道的JavaScript 中的定义:
内部函数传递到所在的词法作用域以外，并持有对原始函数定义时的作用域的引用，无论在何处执行这个函数都会使用闭包
:::

:::tip MDN 中的定义:
函数和对词法环境的引用捆绑在一起构成闭包。也就是说，闭包可以让你从内部函数访问外部函数作用域
:::

引用MDN上的列子
```js
function makeFunc() {
    var name = "Mozilla";     // name 是一个被 init 创建的局部变量
    function displayName() {  // displayName() 是内部函数，一个闭包
        alert(name);          // 使用了父函数中声明的变量
    }
    return displayName;
}

var myFunc = makeFunc();
myFunc();
```
:::tip 个人理解：
我对闭包的理解是基于《JavaScript语言精髓与编程实践》中对闭包的解释：

**闭包就是记录函数实例在运行期的“可访问标识符”的信息**
:::
(单次装载的)模块和全局脚本都是单次执行的，所以他们执行期的“可访问标识符”，是与词法作用域一致的，
而函数是可以实例化的，实例是可以多次执行的，因此，JavaScript 中用闭包来指代一个函数实例在运行期的作用域

```js
function makeFunc(x) {
  return function() {
    return x + 1;
  };
}
var myFunc1 = makeFunc(2);
var myFunc2 = makeFunc(3);
console.log(myFunc1()); 
console.log(myFunc2()); 
```
makeFunc()的函数实例执行期，x的值是不确定的，所以，要用闭包来指代函数实例运行期的作用域

<!-- 与闭包相对应的，*语句行(除掉变量声明或函数声明的语句)在他们唯一的一次执行期中，是非闭包的* -->
